<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="favicon.png" type="image/x-icon"/>
  <link rel='stylesheet' href='https://easycss.github.io/easyform/form-all.css' />
  <link rel='stylesheet' href='https://easycss.github.io/easyform/buttons.css'>
  <link rel='stylesheet' href='style.css' />
  <title>Browser Notes</title>
</head>
<body>

<div class="wrapper">
<div class="container">

<header>

<div class="header">

<div class="font-adjust">
  <button id="increase-font-size" class="btn btn-white-border">A+</button>
  <button id="decrease-font-size" class="btn btn-white-border">A-</button>
</div>

  <button onclick="handleToggleForm()" id="toggleForm" class="btn btn-new">ADD NOTE</button>

<button class="btn-download" id="downloadButton">DOWNLOAD NOTES</button>

</div><!-- \header -->

<button onclick="deleteAll()" class="btn btn-delete">DELETE ALL</button>

</header>

<form>
  <input id="title" type="text" placeholder="Enter Title" required autofocus>
  <textarea id="content" type="text" placeholder="Enter Content"></textarea>
  
  <button class="btn btn-add-note" id="add">GO!</button>
</form>


<!--  -->
<!--  -->
<div id="root"></div>
<!--  -->
<!--  -->


<!-- \container -->
</div>

<div class="github">  
  <a href="https://github.com/mattheweq" target="_blank">
    <img src="https://raw.githubusercontent.com/mattheweq/icons-repo/main/github.svg" alt="Matthew">
  </a>
</div>

</div>
<!-- \wrapper -->
<script src='app.js'></script>

<!--  -->
<!--  -->
<!--  -->
<script>
// Function to download localStorage data as a JSON file as backup for when localStorage is deleted
    
    function downloadBackup() {
      const localStorageData = { ...localStorage }; // Copy localStorage data

      // Convert to JSON
      // const jsonData = JSON.stringify(localStorageData, null, 2);

      // Convert to Raw Text
      const rawText = Object.keys(localStorageData)
        .map(key => `${key}: ${localStorageData[key]}`)
        .join('\n');

      // Create a Blob with the data
      // const blob = new Blob([jsonData], { type: 'application/json' });
      const blob = new Blob([rawText], { type: 'text/plain'  });

      // Create a download link
      const downloadLink = document.createElement('a');
      downloadLink.href = URL.createObjectURL(blob);
      
      // downloadLink.download = 'localStorageBackup.json';
      downloadLink.download = 'localStorageBackup.txt';

      // Append the link to the body
      document.body.appendChild(downloadLink);

      // Trigger a click on the link to start the download
      downloadLink.click();

      // Remove the link from the body
      document.body.removeChild(downloadLink);
    }

    // Attach click event to the download button
    const downloadButton = document.getElementById('downloadButton');
    downloadButton.addEventListener('click', downloadBackup);

    
  </script>
</body>
</html>

